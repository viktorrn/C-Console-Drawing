
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include "structs.h"
#include "matrixMath.h"

#define ScreenWidth 64
#define ScreenHeight 32

char  ScreenBuffer[ScreenWidth*ScreenHeight];

void drawBuffer(int w, int h, char* buffer);
void clearBuffer(int size, char*buffer);



void init_camera(Camera* cam)
{
    cam->postion.x = 0.0f;
    cam->postion.y = 0.0f;
    cam->postion.z = 0.0f;

    cam->rotation.x = 0.0f;
    cam->rotation.y = 0.0f;
}


int main()
{
    
    //Camera cam1;
    //init_camera(&cam1);
    double far = 20;
    double near = 0.1;
    double fov = 90;
    double top = 1;
    double e = 1/(tan(fov/2));
    double aspect = ScreenWidth/ScreenHeight;

    Matrix mat1;
    
    printf("%d\n",&mat1);
    setMatrix4x4Values(&mat1,e/aspect,0.0f,0.0f,0.0f,
                             0.0f, e  ,0.0f,0.0f,
                             0.0f,0.0f,far+near/(near-far),2*far/(near-far),
                             0.0f,0.0f,-1,0.0f
                        ); 
    Matrix mat2; 
    setMatrix4x4Values(&mat2,1.0f,0.0f,0.0f,0.0f,
                            0.0f,1.0f,0.0f,0.0f,
                            0.0f,0.0f,1.0f,0.0f,
                            0.0f,0.0f,0.0f,1.0f); 
   
    //printf("declared stuff");
    
    Matrix mat3;
    mat3 = multiplyMatricies( &mat1, &mat2); 

    for(int y = 0; y < 4; y++)
    {
        for(int x = 0; x < 4; x++)
        {
            printf("%lf ",mat3.m[y][x]);
        }
        printf("\n");
    }

    return 0;
}

void clearBuffer(int size, char* buffer)
{
    
    for(int i = 0; i < size; i++)
    {
        buffer[i] = 0;
    }
}

void drawBuffer(int w, int h, char* buffer)
{
    system("clear");
    int i = 0;
    for(int y = 0; y < h; y++)
    {
         for(int x = 0; x < w; x++)
        {
            printf("%c",buffer[i]);
            i++;
        }
        printf("\n"); 
    }
}

char dodge[1000] = 
{
'*','*','*','*','*','*','*','*','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','#','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*',
'*','*','*','*','#','#','#','#',' ',' ','#','#',' ',' ',' ',' ',' ',' ',' ',' ','#','#',' ',' ','#','#','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*',
'*','*','*','*','#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*',
'*','*','#','#','#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*',
'#','#','#','#',' ',' ',' ',' ',' ',' ','#','#',' ',' ',' ',' ','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','*','#','#','*','*','#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','#','#','#','#','*','*','*','*','*','*','*','*','*','*','*','*','*','*',
'#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ','#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','#','#','#','#','#','#','#','#','#','#','#','#','*','*','#','#','#','#',' ',' ',' ',' ','#','#',' ',' ','#','#',' ',' ',' ',' ','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#',
'#','#','#','#',' ',' ',' ',' ',' ',' ','#','#','#','#','#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','#','#','#','#','#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','#','#','#','#','*','*',
'#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','#','#','*','*','#','#',
'#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','#','#','*','*','*','*','#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','*','*','*','*','*','*',
'#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','#','#','*','*','*','*','*','*','#','#','#','#',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','#','#','#','#','*','*','*','*','*','*',
'*','*','#','#','#','#',' ',' ',' ',' ',' ',' ','#','#','#','#',' ',' ',' ',' ','#','#','#','#','#','#','#','#',' ',' ',' ',' ','#','#','#','#',' ',' ',' ',' ','#','#','*','*','*','*','*','*','*','*','*','*','#','#','#','#',' ',' ',' ',' ','#','#','#','#','#','#','#','#','#','#','*','*','*','*','#','#','#','#','#','#','#','#','#','#','#','#',' ',' ','#','#','#','#','*','*','*','*','*','*','*','*',
'*','*','#','#','#','#','#','#','#','#','#','#','*','*','#','#','#','#','*','*','*','*','*','*','*','*','*','*','#','#','*','*','*','*','#','#','#','#','#','#','*','*','*','*','*','*','*','*','*','*','*','*','#','#','#','#',' ',' ',' ',' ',' ',' ','#','#','#','#',' ',' ','#','#','#','#','#','#','#','#','#','#',' ',' ','#','#','#','#','#','#',' ',' ',' ',' ','#','#','#','#','*','*','*','*','*','*',
};